<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>EXAM FINAL: SEMESTER PROJECT &vert; COE 111L - SPRING 2017</title>
<meta name="description" content="Engineering Computation Lab">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/ECL2017S/images/logo.png">
<meta name="twitter:title" content="Exam final: semester project">
<meta name="twitter:description" content="Engineering Computation Lab">
<meta name="twitter:creator" content="@AmirShahmoradi">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Exam final: semester project">
<meta property="og:description" content="Engineering Computation Lab">
<meta property="og:url" content="/ECL2017S/exam/2-semester-project">
<meta property="og:site_name" content="COE 111L - Spring 2017">
<meta property="og:image" content="/ECL2017S/images/">





<link rel="canonical" href="/ECL2017S/exam/2-semester-project">
<!-- <link href="/ECL2017S/feed.xml" type="application/atom+xml" rel="alternate" title="COE 111L - Spring 2017 Feed"> -->


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,600,300,800,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/ECL2017S/assets/css/vendor/font-awesome.min.css">
    <link rel="stylesheet" href="/ECL2017S/assets/css/vendor/normalize.css">
    <link rel="stylesheet" href="/ECL2017S/assets/css/vendor/nprogress.css">
    <link rel="stylesheet" href="/ECL2017S/assets/css/vendor/foundation.min.css">
    <link rel="stylesheet" href="/ECL2017S/assets/css/style.css">
    <link rel="stylesheet" href="/ECL2017S/assets/css/post.css">




<!--Mathjax loader: taken from http://stackoverflow.com/questions/2188884/how-can-i-mix-latex-in-with-markdown-->
<style TYPE="text/css">
code.has-jax {font: inherit; font-size: 100%; background: inherit; border: inherit;}
</style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] // removed 'code' entry
    }
});
MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!--End of Mathjax loader: taken from http://stackoverflow.com/questions/2188884/how-can-i-mix-latex-in-with-markdown-->

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/ECL2017S/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/ECL2017S/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/ECL2017S/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ECL2017S/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ECL2017S/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ECL2017S/images/apple-touch-icon-144x144-precomposed.png">

<!-- 
<link href="/ECL2017S/assets/css/prismTwilight.css" rel="stylesheet" />
<link href="/ECL2017S/assets/css/prismDefault.css" rel="stylesheet" />
<link href="/ECL2017S/assets/css/prismCoy.css" rel="stylesheet" />
-->
<link href="/ECL2017S/assets/css/prismOkaidia.css" rel="stylesheet" />

<!--The following are for automatic generation of header anchor links: adopted from: http://ben.balter.com/2014/03/13/pages-anchor-links/-->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<style type="text/css">@media only screen and (min-width:43.75em){.notepad-post-content div>p:first-child:first-letter{float:left;font-size:4.688rem;line-height:4.375rem;padding-top:.25rem;padding-right:.5rem;padding-left:.188rem;font-family:serif}}</style>
</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

        <main id="notepad-post-container-simple" class="notepad-post-container-simple" role="main">
            <header class="notepad-post-header-simple">
                <div class="notepad-post-menu-header-simple">

                    <a class="notepad-blog-logo" href="http://www.shahmoradi.org" target="_blank"><img src="/ECL2017S/images/logo.png" alt="shahmoradi.org" /></a>

                <div class="notepad-blog-menu">      
    <div class="notepad-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="notepad-menu">
        <li class="notepad-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="/ECL2017S/">Home</a>
                 </li>

            <li>
                    <a href="/ECL2017S/highlights">Highlights</a>
                 </li>

            <li>
                    <a href="/ECL2017S/categories">Categories</a>
                 </li>

            <li>
                    <a href="/ECL2017S/about">About</a>
                 </li>
            
           <li><a href="/ECL2017S/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
    </ul>

</div>
            </div>

                <div class="notepad-post-title-simple row">
                    <div class="small-12 columns">
                        <div class="notepad-post-meta-simple">
                            <h2>Exam final: semester project</h2>
                            <p>by <strong>Amir Shahmoradi</strong> &#8212;  <strong><time datetime="2017-04-05T00:00:00-05:00">05 Apr 2017</time></strong></p>
                        </div>
                    </div>
                </div>
            </header>

        
            <article class="notepad-post-content post tag-simple">
        
            <div style="text-align:justify;">
                <p>This is page describes the course project that will serve as the final exam for this course. Please submit all your efforts for this project (all files and data and results) in <code>ECL2017S/exams/final/</code> directory in your private repository for this course. Don’t forget to push your answers to your remote Github repository by the end of the semester.</p>

<p>Inside the directory for the project (<code>ECL2017S/exams/final/</code>) create three other folders: <code>data</code>, <code>src</code>, <code>results</code>. The <code>data</code> folder contains the <a href="/ECL2017S/exam/2/cells.mat" target="_blank">input data</a> for this project. The <code>src</code> folder should contain all your codes that you write for this project, and the <code>results</code> folder should contain all the results generated by your code.</p>

<p><br /></p>

<hr />
<hr />

<p><br /></p>

<p>Our goal in this project is to fit a mathemtical model of the growth to living cells to data for the growth of a tumor mass in the brain of a rat. You can download the MATLAB data file for this project from <a href="/ECL2017S/exam/2/cells.mat" target="_blank">here</a>. Write a Python code, set of separate codes that performs the following tasks one after the other, and output all the results to the <code>results</code> folder described above. If you have multiple Python codes each in a separate file, then write a <code>main.py</code> Python code, such that if the user runs</p>
<pre><code class="language-bash">./main.py ../data/cells.mat ../results/
</code></pre>
<p><br />
then all the necessary Python codes to generate all the results will be called by this <code>main.py</code> code. The first command line argument to this code is the path to the input <a href="/ECL2017S/exam/2/cells.mat" target="_blank">MATLAB data file</a> containing data for this project, and the second command line tells the code where to write all the output and results of the project.</p>

<h3 id="data-structure-of-the-input-matlab-file">Data structure of the input MATLAB file</h3>
<p>The input file, is a 4-dimensional double-precision MATLAB matrix <code>cells(:,:,:,:)</code>, corresponding to dimensions <code>cells(y,x,z,time)</code>. This data is collected from MRI imaging of the rat’s brain almost every other day for a period of two weeks. For example, <code>cells(:,:,:,1)</code> contains the number of cells at each point in space (y,x,z) at the first time point, or, <code>cells(:,:,10,1)</code> represents a (XY) slice of MRI at $z=1$ and $t=1$.</p>

<p>Now write a set of Python codes that perform the following tasks.</p>

<p><br /></p>

<hr />
<hr />

<p><br /></p>

<h3 id="data-reduction-and-visualization">Data reduction and visualization</h3>
<p><br /></p>

<p><strong>1. </strong> First write a code that reads the input MATLAB file and converts the data to a 4-D NumPy array.</p>

<p><strong>2. </strong> Write Python codes that generate figures as similar as possible to the following figures (specific color-codes of the curves and figures do not matter, focus more on the format of the plots and its parts).</p>

<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_1_t10.0.png" width="900" />
</figure>
<p><br /></p>
<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_2_t12.0.png" width="900" />
</figure>
<p><br /></p>
<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_3_t14.0.png" width="900" />
</figure>
<p><br /></p>
<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_5_t16.0.png" width="900" />
</figure>
<p><br /></p>
<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_6_t18.0.png" width="900" />
</figure>
<p><br /></p>
<figure>
	<img src="/ECL2017S/exam/2/figures/tvccZSliceSubplotWithXYlab_rad_00gy_7_t20.0.png" width="900" />
</figure>
<p><br /></p>

<p>and finally, a plot that shows the time evolution of the total number of tumor cells at all time points available in the input data. The time points are  $T=[10, 12, 14, 15, 16, 18, 20]$ in units of days.</p>
<figure>
	<img src="/ECL2017S/exam/2/figures/growthCurve_CellCount_rad_00gy.png" width="900" />
</figure>
<p><br /></p>

<h3 id="the-mathematical-model-of-tumor-growth">The mathematical model of tumor growth</h3>
<p><br /></p>

<p><strong>3. </strong> Now our goal is to fit the time evolution of the growth of this tumor, using a mathematical model, and use the maximum likelihood approach and Markov Chain Monte Carlo Technique to find the best-fit parameters of the model. The model we use is called the <a href="https://en.wikipedia.org/wiki/Gompertz_function" target="_blank">Gompertizan growth model</a>,</p>

<script type="math/tex; mode=display">N(t,a,b,c) = a\exp\big( -b\exp(-ct) \big) ~,</script>

<p>where $N(t)$ is the number of tumor cells at time $t$, and $a$, $b$, and $c$ are the parameters that we would like to find their best values given the input tumor cell data.</p>

<h4 id="combining-the-mathematical-model-with-a-regression-model">Combining the mathematical model with a regression model</h4>

<p>Now, if the model was ideally perfect in describing the data, the curve of the model predicion would pass through all the points in the growth curve plot in the above, providing a prefect description of data. This is however, never the case, as it is famously said <strong>all models are wrong, but some are useful</strong>. In other words, the model prediction never matches observation perfectly. Therefore, we have to seek for the parameter values of the model that can get us closet possible to data. To do so, we define a statistical regression model (the renowned least-squares method) that gives us the probability $\pi(N_{obs}|N(t))$ of observing individual data points at each of the given times,</p>

<script type="math/tex; mode=display">\pi(N_{obs}|N(t),a,b,c) = \frac{1}{\sigma\sqrt{2\pi}} \exp\bigg( - \frac{ \big[ N_{obs}(t)-N(t) \big]^2}{2\sigma^2} \bigg) ~,</script>

<p>We have seven data points, so the overall probability of observing all of data $\mathcal{D}$ together given the parameters of the model, $\mathcal{L}(D|a,b,c,\sigma)$, is the product of their invidiual probabilities of observation given by the above equation,</p>

<script type="math/tex; mode=display">\mathcal{L}(D|a,b,c,\sigma) = \prod_{i=1}^{n=7} \pi(N_{obs}(t_i)|N(t_i),a,b,c) = \prod_{i=1}^{n=7} \frac{1}{\sigma\sqrt{2\pi}} \exp\bigg( - \frac{ \big[ N_{obs}(t_i)-N(t_i) \big]^2}{2\sigma^2} \bigg) ~,</script>

<p>More often, you would want to work with $\log\mathcal{L}$ instead of $\mathcal{L}$, so the above equation becomes,</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align*}
    \log\mathcal{L}(D|a,b,c,\sigma)
    &= \sum_{i=1}^{n=7} \log\pi(N_{obs}(t_i)|N(t_i),a,b,c) \\\\
    &= -\frac{n}{2}\bigg( \ln(2\pi) + \ln\sigma^2 \bigg) - \frac{1}{2\sigma^2} \sum_{i=1}^{n=7} \bigg[ N_{obs}(t_i)-N(t_i) \bigg]^2 ~,
\end{align*} %]]></script>

<p><strong>4. </strong>  Now the goal is to use an optimization algorithm, such as Markov Chain Monte Carlo available in Python via <a href="https://pymc-devs.github.io/pymc/README.html" target="_blank">PyMc package</a>, to find the most likely set of parameters of the model $a,b,c,\sigma$ that give the best prediction of the available data. Use the pymc package, or any other method you wish to obtein the best parameters, then redraw the above tumor evolution curve and show the result from the model as well. You can also alternatively use my own package for MCMC sampling, if which case, please inform me and I will instruct how to use it.</p>

<p><br /><br /></p>

            </div>
        </article>
        <div class="cf"></div>
        <div class="row text-center">
            <section class="notepad-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;Exam final: semester project&quot;%20/ECL2017S/exam/2-semester-project%20via%20&#64;AmirShahmoradi"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=/ECL2017S/exam/2-semester-project"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=/ECL2017S/exam/2-semester-project"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
        <div class="cf"></div>
        
            <div class="notepad-author-info">
                <div class="row">
                    <section class="notepad-post-author small-12 columns">
                        
                            <a href="http://www.shahmoradi.org" target="_blank">
                                <img src="/ECL2017S/images/logo.png" class="notepad-post-author-avatar" alt="Amir Shahmoradi's photo">
                            </a>
                        
                        
                            <span class="author-label">Author</span>
                            <h1>Amir Shahmoradi</h1>
                        
                        
                            <p><a href="mailto:amir@ices.utexas.edu" class="author-website">amir@ices.utexas.edu</a></p>
                        
                        
                            <p>Genius is 99% perspiration and 1% inspiration</p>
                        
                    </section>
                </div>
            </div> 
        
        <div class="cf"></div>
        
        <section class="notepad-disqus row">
    <div class="small-12 columns">
        <h1 class="notepad-comments-header">Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'shahmoradi'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

        <div class="cf"></div>

    <footer class="notepad-site-footer">
    <div class="copyright">
         <!-- <section>Last updated 2017 / 04 / 26</section></br> -->
         <section>Last updated Wednesday, 26 Apr 2017 at 02:06 PM CST</section></br>
         <section>All content exclusively maintained by <a href="http://shahmoradi.org" target="_blank">Amir Shahmoradi</a> <!-- &copy;--> </section></br>
         <section><a class="icon-ghost" href="http://www.ae.utexas.edu/" target="_blank">Department of Aerospace Engineering and Engineering Mechanics</a></section></br>
         <section><a class="icon-ghost" href="https://www.ices.utexas.edu/" target="_blank">Institute for Computational Engineering and Sciences | POB 6.328</a></section></br>
         <section><a class="icon-ghost" href="http://www.utexas.edu/" target="_blank">The University of Texas at Austin</a></section></br>
         <section>201 E 24th Street, Stop C0200</section></br>
         <section>Austin, TX 78712-1229</section>
    </div>
    <div class="social-icons">
        
        
        <a href="http://twitter.com/AmirShahmoradi" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
            </span>
        </a>
        
        
        
        
        <a href="http://github.com/shahmoradi" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        
    </div>
    
    <div class="cf"></div>
</footer> 
</main>    
<!-- The following scripts are needed for the dynamic header of pages -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/ECL2017S/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
  <script src="/ECL2017S/assets/js/vendor/modernizr.js"></script>
  <script src="/ECL2017S/assets/js/foundation.min.js"></script>
  
  <script src="/ECL2017S/assets/js/notepad.js"></script>
  <script src="/ECL2017S/assets/js/scripts.min.js"></script>
  <script src="/ECL2017S/assets/js/vendor/nprogress.js"></script>
  
  <script>
    $(document).foundation();
  </script>
  <script type='text/javascript'>console.log("N/A");</script>
  <script type='text/javascript'>console.log("http://www.shahmoradi.org/");</script>
<!-- End of scripts for the dynamic header of pages -->

<!--The following scripts is for automatic generation of header anchor links: adopted from: http://ben.balter.com/2014/03/13/pages-anchor-links/-->
<script src="/ECL2017S/assets/js/autoAnchorLink.js"></script>
<!--End of automatic generation of header anchor links.-->



<!-- <script src="/ECL2017S/assets/js/prismOkaidia.js"></script>
<script src="/ECL2017S/assets/js/prismTwilight.js"></script>
<script src="/ECL2017S/assets/js/prismDefault.js"></script>
 -->
<script src="/ECL2017S/assets/js/prismCoy.js"></script>




<!-- Start of Google Analytics Code for Default Guide -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-67460905-1', 'auto');
    ga('send', 'pageview');
  </script>
<!-- End of Google Analytics Code for Default Guide -->
   
<!-- Start of StatCounter Code for Default Guide -->
  <script type="text/javascript">
    var sc_project=10611821; 
    var sc_invisible=1; 
    var sc_security="902e4bb4"; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' src='" +
    scJsHost+
    "statcounter.com/counter/counter.js'></"+"script>");
    </script>
    <noscript><div class="statcounter"><a title="shopify visitor
    statistics" href="http://statcounter.com/shopify/"
    target="_blank"><img class="statcounter"
    src="http://c.statcounter.com/10611821/0/902e4bb4/0/"
    alt="shopify visitor statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide --> 
<!--automatic Table of Content.-->
<script src="/ECL2017S/assets/js/autoTOC.js"></script>
</body>
</html>
